(function(u,n,e,h,o,C,A,l,S,g,x){"use strict";const{View:m,Text:s,Pressable:F}=n.findByProps("Button","Text","View"),E=n.findByProps("extractTimestamp"),a=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"},bold:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD},highlight:{backgroundColor:h.semanticColors.BACKGROUND_MESSAGE_HIGHLIGHT_HOVER}});function y({date:t}){return e.React.createElement(s,{onPress:function(){C.showToast(e.moment(t).toLocaleString(),o.getAssetIDByName("ic_clock"))},onLongPress:function(){e.clipboard.setString(t.getTime().toString()),C.showToast("Copied Timestamp to Clipboard",o.getAssetIDByName("ic_message_copy"))},style:[a.highlight]},e.moment(t).fromNow())}function B({channel:t}){return e.React.createElement(e.React.Fragment,null,e.React.createElement(s,{style:[a.text,a.bold]},"Topic:")," ",e.React.createElement(s,null,t.topic||"No topic."),e.React.createElement(s,{style:[a.text,a.bold]},`

`,"Creation date:")," ",e.React.createElement(y,{date:new Date(E.extractTimestamp(t.id))}),e.React.createElement(s,{style:[a.text,a.bold]},`

`,"Last message:")," ",t.lastMessageId?e.React.createElement(y,{date:new Date(E.extractTimestamp(t.lastMessageId))}):e.React.createElement(s,null,"No messages."),e.React.createElement(s,{style:[a.text,a.bold]},`

`,"Last pin:")," ",t.lastPinTimestamp?e.React.createElement(y,{date:new Date(t.lastPinTimestamp)}):e.React.createElement(s,null,"No pins."))}const{FormRow:_,FormSection:N,FormSwitc:k,FormSwitchRow:b}=S.Forms;function v(){return A.useProxy(l.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1}},e.React.createElement(N,{title:"Options",titleStyleType:"no_border"},e.React.createElement(b,{label:"Show Lock Icon",subLabel:"Show a lock icon to the right of hidden channel names.",leading:e.React.createElement(_.Icon,{source:o.getAssetIDByName("ic_lock")}),onValueChange:function(t){return l.storage.showIcon=t},value:l.storage.showIcon})))}const w=n.findByProps("getChannelPermissions","can"),{ChannelTypes:R}=n.findByProps("ChannelTypes"),{getChannel:P}=n.findByProps("getChannel")||n.findByName("getChannel",!1);n.findByProps("extractTimestamp");const D=[R.DM,R.GROUP_DM,R.GUILD_CATEGORY];function T(t){if(t===void 0||(typeof t=="string"&&(t=P(t)),!t||D.includes(t.type)))return!1;t.realCheck=!0;const d=!w.can(e.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,d}const c=[];var M={onLoad:function(){if(l.storage.showIcon??=!0,l.storage.showPopup??=!0,!(n.findByProps("ChannelMessages")||n.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};c.push(g.after("can",w,function([r,i],f){return!i?.realCheck&&r===e.constants.Permissions.VIEW_CHANNEL?!0:f}));const t=n.findByProps("transitionToGuild");if(t)for(const r of Object.keys(t))typeof t[r]=="function"&&c.push(g.instead(r,t,function(i,f){if(typeof i[0]=="string"){const I=i[0].match(/(\d+)$/);if(I?.[1]){const L=I[1],p=P(L);if(p&&T(p))return l.storage.showPopup&&x.showConfirmationAlert({title:"This channel is hidden.",content:e.React.createElement(B,{channel:p}),confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return f(...i)}}),{}}}return f(...i)}));else console.warn("[HiddenChannels] transitionToGuild not found.");const d=n.findByName("ChannelInfo",!1);d&&l.storage.showIcon&&c.push(g.after("default",d,function([{channel:r}],i){return e.React.createElement(e.React.Fragment,{},r&&T(r)?e.React.createElement(e.ReactNative.Image,{source:o.getAssetByName("ic_lock").id,style:{width:20,height:20,marginRight:4}}):null,i)}))},onUnload:function(){for(const t of c)t()},settings:v};return u.default=M,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.ui.alerts);

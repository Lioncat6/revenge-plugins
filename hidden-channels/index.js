(function(u,n,e,h,l,C,_,a,B,g,b){"use strict";const{View:m,Text:i,Pressable:F}=n.findByProps("Button","Text","View"),E=n.findByProps("extractTimestamp"),s=e.stylesheet.createThemedStyleSheet({container:{flex:1,padding:16,alignItems:"center",justifyContent:"center"},title:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD,fontSize:24,textAlign:"left",color:h.semanticColors.HEADER_PRIMARY,paddingVertical:25},text:{flex:1,flexDirection:"row",fontSize:16,textAlign:"justify",color:h.semanticColors.HEADER_PRIMARY},dateContainer:{height:16,alignSelf:"baseline"},bold:{fontFamily:e.constants.Fonts.PRIMARY_SEMIBOLD},highlight:{backgroundColor:h.semanticColors.BACKGROUND_MESSAGE_HIGHLIGHT_HOVER}});function p({date:t}){return e.React.createElement(i,{onPress:function(){C.showToast(e.moment(t).toLocaleString(),l.getAssetIDByName("ic_clock"))},onLongPress:function(){e.clipboard.setString(t.getTime().toString()),C.showToast("Copied Timestamp to Clipboard",l.getAssetIDByName("ic_message_copy"))},style:[s.highlight]},e.moment(t).fromNow())}function x({channel:t}){return e.React.createElement(e.React.Fragment,null,e.React.createElement(i,{style:[s.text,s.bold]},"Topic:")," ",e.React.createElement(i,null,t.topic||"No topic."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Creation date:")," ",e.React.createElement(p,{date:new Date(E.extractTimestamp(t.id))}),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last message:")," ",t.lastMessageId?e.React.createElement(p,{date:new Date(E.extractTimestamp(t.lastMessageId))}):e.React.createElement(i,null,"No messages."),e.React.createElement(i,{style:[s.text,s.bold]},`

`,"Last pin:")," ",t.lastPinTimestamp?e.React.createElement(p,{date:new Date(t.lastPinTimestamp)}):e.React.createElement(i,null,"No pins."))}const{FormRow:w,FormSection:N,FormSwitc:H,FormSwitchRow:P}=B.Forms;function v(){return _.useProxy(a.storage),e.React.createElement(e.ReactNative.ScrollView,{style:{flex:1}},e.React.createElement(N,{title:"Options",titleStyleType:"no_border"},e.React.createElement(P,{label:"Show Lock Icon",subLabel:"Show a lock icon to the right of hidden channel names.",leading:e.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_lock")}),onValueChange:function(t){return a.storage.showIcon=t},value:a.storage.showIcon}),e.React.createElement(P,{label:"Show Popup on Hidden Channels",subLabel:"Toggle the information popup that appears when selecting hidden channels.",leading:e.React.createElement(w.Icon,{source:l.getAssetIDByName("ic_more_android")}),onValueChange:function(t){return a.storage.showPopup=t},value:a.storage.showPopup})))}const I=n.findByProps("getChannelPermissions","can"),{ChannelTypes:y}=n.findByProps("ChannelTypes"),{getChannel:T}=n.findByProps("getChannel")||n.findByName("getChannel",!1);n.findByProps("extractTimestamp");const D=[y.DM,y.GROUP_DM,y.GUILD_CATEGORY];function A(t){if(t===void 0||(typeof t=="string"&&(t=T(t)),!t||D.includes(t.type)))return!1;t.realCheck=!0;const d=!I.can(e.constants.Permissions.VIEW_CHANNEL,t);return delete t.realCheck,d}const c=[];var M={onLoad:function(){if(a.storage.showIcon??=!0,a.storage.showPopup??=!0,!(n.findByProps("ChannelMessages")||n.findByName("ChannelMessages",!1)))return console.error("Hidden Channels plugin: 'ChannelMessages' module not found."),function(){};c.push(g.after("can",I,function([r,o],f){return!o?.realCheck&&r===e.constants.Permissions.VIEW_CHANNEL?!0:f}));const t=n.findByProps("transitionToGuild");if(t)for(const r of Object.keys(t))typeof t[r]=="function"&&c.push(g.instead(r,t,function(o,f){if(typeof o[0]=="string"){const S=o[0].match(/(\d+)$/);if(S?.[1]){const L=S[1],R=T(L);if(R&&A(R))return a.storage.showPopup&&b.showConfirmationAlert({title:"This channel is hidden.",content:e.React.createElement(x,{channel:R}),confirmText:"View Anyway",cancelText:"Cancel",onConfirm:function(){return f(...o)}}),{}}}return f(...o)}));else console.warn("[HiddenChannels] transitionToGuild not found.");const d=n.findByName("ChannelInfo",!1);d&&a.storage.showIcon&&c.push(g.after("default",d,function([{channel:r}],o){return e.React.createElement(e.React.Fragment,{},r&&A(r)?e.React.createElement(e.ReactNative.Image,{source:l.getAssetByName("ic_lock").id,style:{width:20,height:20,marginRight:4}}):null,o)}))},onUnload:function(){for(const t of c)t()},settings:v};return u.default=M,Object.defineProperty(u,"__esModule",{value:!0}),u})({},vendetta.metro,vendetta.metro.common,vendetta.ui,vendetta.ui.assets,vendetta.ui.toasts,vendetta.storage,vendetta.plugin,vendetta.ui.components,vendetta.patcher,vendetta.ui.alerts);
